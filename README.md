## üìã –û–±–∑–æ—Ä

–≠—Ç–æ—Ç —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π —Å–æ–¥–µ—Ä–∂–∏—Ç –ø—Ä–∏–º–µ—Ä —Å—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω–æ–≥–æ —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ–≥–æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è (domain layer).

- __Modular Test Architecture__ - —Ä–∞–∑–¥–µ–ª–µ–Ω–∏–µ –Ω–∞ –¥–æ–º–µ–Ω—ã (calls, geo, roaming, sms, url)
- __Data-Driven Testing__ - –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –ø–∞—Ä–∞–º–µ—Ç—Ä–∏–∑–æ–≤–∞–Ω–Ω—ã—Ö —Ç–µ—Å—Ç–æ–≤ —Å —Ä–∞–∑–¥–µ–ª–µ–Ω–Ω—ã–º–∏ test data
- __Clean Code__ - —É—Ç–∏–ª–∏—Ç—ã –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –∏ —Ñ–∏–∫—Å—Ç—É—Ä—ã –≤ –æ—Ç–¥–µ–ª—å–Ω—ã—Ö –º–æ–¥—É–ª—è—Ö

## üèóÔ∏è –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

### –°—Ç—Ä—É–∫—Ç—É—Ä–∞

```javascript
tests/
‚îú‚îÄ‚îÄ shrinker_domain/
‚îÇ   ‚îú‚îÄ‚îÄ calls/
‚îÇ   ‚îú‚îÄ‚îÄ geo/
‚îÇ   ‚îú‚îÄ‚îÄ roaming/
‚îÇ   ‚îú‚îÄ‚îÄ sms/
‚îÇ   ‚îî‚îÄ‚îÄ url/
```

### –ö–∞–∂–¥—ã–π –¥–æ–º–µ–Ω —Å–æ–¥–µ—Ä–∂–∏—Ç:

- __test_*.py__ - –æ—Å–Ω–æ–≤–Ω–æ–π —Ñ–∞–π–ª —Å test cases
- __conftest.py__ - fixtures –∏ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –¥–ª—è –¥–æ–º–µ–Ω–∞ (—Å–æ–¥–µ—Ä–∂–∏—Ç —Ç–æ–ª—å–∫–æ –ø—É—Ç—å –∫ —Ç–µ—Å—Ç–æ–≤—ã–º –¥–∞–Ω–Ω—ã–º, –≤—Å–µ –æ—Å—Ç–∞–ª—å–Ω—ã–µ —Ñ–∏–∫—Å—Ç—É—Ä—ã –∏ —Ö—É–∫–∏ —è–≤–ª—è—é—Ç—Å—è –æ–±—â–∏–º–∏ –∏ –Ω–∞—Ö–æ–¥—è—Ç—Å—è –≤ conftest-—Ñ–∞–π–ª–µ –∏–∑ –∫–æ—Ä–Ω—è –ø—Ä–æ–µ–∫—Ç–∞)
- __testutils.py__ - —É—Ç–∏–ª–∏—Ç—ã –∏ helper —Ñ—É–Ω–∫—Ü–∏–∏
- __test_data/__ - –ø–∞—Ä–∞–º–µ—Ç—Ä–∏–∑–æ–≤–∞–Ω–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –¥–ª—è —Ç–µ—Å—Ç–æ–≤

## üîß –¢–µ—Ö–Ω–æ–ª–æ–≥–∏—á–µ—Å–∫–∏–π —Å—Ç–µ–∫

| –ö–æ–º–ø–æ–Ω–µ–Ω—Ç | –¢–µ—Ö–Ω–æ–ª–æ–≥–∏—è | |-----------|-----------| | __Language__ | Python 3.x | | __Test Framework__ | pytest | | __Test Parametrization__ | pytest.mark.parametrize | | __Fixtures__ | pytest fixtures (conftest.py) | | __Assertions__ | pytest assertions |

## üìù –ü–æ–¥—Ö–æ–¥ –∫ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—é

### 1. __–û—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏—è test data__

Test –¥–∞–Ω–Ω—ã–µ —Ä–∞–∑–¥–µ–ª–µ–Ω—ã –ø–æ —Å—Ü–µ–Ω–∞—Ä–∏—è–º –≤ –æ—Ç–¥–µ–ª—å–Ω—ã–µ –º–æ–¥—É–ª–∏:

- `data_test_*_base.py` - –±–∞–∑–æ–≤—ã–µ —Å—Ü–µ–Ω–∞—Ä–∏–∏ (–∫–æ–Ω—Ç–µ–Ω—Ç–Ω—ã–µ –ø—Ä–æ–≤–µ—Ä–∫–∏)
- `data_test_*_from_pause_to_run.py` - –∞–∫—Ç–∏–≤–∞—Ü–∏—è
- `data_test_*_from_run_to_pause.py` - –¥–µ–∞–∫—Ç–∏–≤–∞—Ü–∏—è 
- `data_test_*_from_stop_to_run.py` - –Ω–æ–≤—ã–π –∑–∞–ø—É—Å–∫ –ø–æ—Å–ª–µ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è
- `data_test_*_to_run_by_time.py` - –≤—Ä–µ–º–µ–Ω–Ω—ã–µ —Ç—Ä–∏–≥–≥–µ—Ä—ã –∑–∞–ø—É—Å–∫–∞
- `data_test_*_to_stop_by_time.py` - –≤—Ä–µ–º–µ–Ω–Ω—ã–µ —Ç—Ä–∏–≥–≥–µ—Ä—ã –æ—Å—Ç–∞–Ω–æ–≤–∫–∏

### 2. __–ü–∞—Ä–∞–º–µ—Ç—Ä–∏–∑–æ–≤–∞–Ω–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ__

–ü–∞—Ä–∞–º–µ—Ç—Ä–∏–∑–∞—Ü–∏—è —á–µ—Ä–µ–∑ —Ö—É–∫ pytest_generate_tests (–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ —É–∫–∞–∑–∞—Ç—å –≤ –Ω–µ–º –ø—É—Ç—å –∫ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏ —Å —Ç–µ—Å—Ç–æ–≤—ã–º–∏ –¥–∞–Ω–Ω—ã–º–∏ –¥–ª—è –∏–º–ø–æ—Ä—Ç–∞ –ø–æ–¥ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–∏–µ —Ç–µ—Å—Ç—ã):
```javascript
def pytest_generate_tests(metafunc):
    """
    –•—É–∫ pytest, –∫–æ—Ç–æ—Ä—ã–π –ø—Ä–∏ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏ —Ñ–∏–∫—Å—Ç—É—Ä, —Å–º–æ—Ç—Ä–∏—Ç –µ—Å—Ç—å –ª–∏ —É —Ç–µ—Å—Ç–∞ —Ñ–∏–∫—Å—Ç—É—Ä—ã, –Ω–∞—á–∏–Ω–∞—é—â–∏–µ—Å—è —Å data_, –µ—Å–ª–∏
    –Ω–∞—Ö–æ–¥–∏—Ç - –∏–º–ø–æ—Ä—Ç–∏—Ä—É–µ—Ç —Ñ–∏–∫—Å—Ç—É—Ä—É, –∫–∞–∫ –ø–∞–∫–µ—Ç
    """

    path = "tests/shrinker_domain/url/test_data"

    env = Env()
    State.prep_user = env.get_env_data_by_name(name="PREP_USER")

    # –û–±—Ä–∞–±–æ—Ç–∫–∞ —Ç–µ—Å—Ç–æ–≤—ã—Ö –¥–∞–Ω–Ω—ã—Ö
    for fixture in metafunc.fixturenames:
        if fixture.startswith('data_'):

            # –ü–µ—Ä–µ–¥–∞–µ–º –Ω–∞–∑–≤–∞–Ω–∏–µ –ø–∞—Ä–∞–º–µ—Ç—Ä–∞ –≤ —Ñ—É–Ω–∫—Ü–∏—é, –∫–æ—Ç–æ—Ä–∞—è –ø–∞—Ä—Å–∏—Ç —Ñ–∞–π–ª
            tests = load_tests(name_of_data_file=fixture, path=path)

            # –û–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ–º xfails
            tests = xfail_handler(tests=tests)

            # –û–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ–º tags –∏ custom labels –¥–ª—è Allure
            tests = tags_handler(tests=tests)

            metafunc.parametrize(fixture, tests)
```

### 3. __–£—Ç–∏–ª–∏—Ç—ã –∏ –≤—Å–ø–æ–º–æ–≥–∞—Ç–µ–ª—å–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏__

–ö–∞–∂–¥—ã–π –¥–æ–º–µ–Ω –∏–º–µ–µ—Ç `testutils.py` –¥–ª—è:

- –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∏ test data
- –í—ã–ø–æ–ª–Ω–µ–Ω–∏—è —É—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–π
- –†–∞–±–æ—Ç—ã —Å –¥–æ–º–µ–Ω–æ—Å–ø–µ—Ü–∏—Ñ–∏—á–Ω—ã–º–∏ –æ–ø–µ—Ä–∞—Ü–∏—è–º–∏

### 4. __–ú–æ–¥—É–ª—å–Ω—ã–µ fixtures__

–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ `conftest.py` –¥–ª—è:

- –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏ shared —Ä–µ—Å—É—Ä—Å–æ–≤
- Setup/teardown –æ–ø–µ—Ä–∞—Ü–∏–π
- –î–æ–º–µ–Ω–æ—Å–ø–µ—Ü–∏—Ñ–∏—á–Ω—ã—Ö –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–π

## üéØ –ö–ª—é—á–µ–≤—ã–µ –æ—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏

‚úÖ __–ú–∞—Å—à—Ç–∞–±–∏—Ä—É–µ–º–æ—Å—Ç—å__ - –ª–µ–≥–∫–æ –¥–æ–±–∞–≤–ª—è—Ç—å –Ω–æ–≤—ã–µ –¥–æ–º–µ–Ω—ã –∏ —Ç–µ—Å—Ç—ã\
‚úÖ __–ü–µ—Ä–µ–∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ__ - shared utilities –∏ fixtures\
‚úÖ __–ö–æ–Ω—Ñ–∏–≥—É—Ä–∏—Ä—É–µ–º–æ—Å—Ç—å__ - domain-specific configurations –≤ conftest.py

## üì¶ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ç–µ—Å—Ç-–∫–µ–π—Å–∞

–¢–∏–ø–∏—á–Ω—ã–π —Ç–µ—Å—Ç –∏–º–µ–µ—Ç —Å—Ç—Ä—É–∫—Ç—É—Ä—É:

1. __Setup__ - –ø–æ–¥–≥–æ—Ç–æ–≤–∫–∞ –¥–∞–Ω–Ω—ã—Ö (—á–µ—Ä–µ–∑ test data –∏ fixtures)
2. __Execution__ - –≤—ã–∑–æ–≤ —Ç–µ—Å—Ç–∏—Ä—É–µ–º–æ–π —Ñ—É–Ω–∫—Ü–∏–∏
3. __Assertion__ - –ø—Ä–æ–≤–µ—Ä–∫–∞ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞ (—á–µ—Ä–µ–∑ testutils)
4. __Cleanup__ - –æ—á–∏—Å—Ç–∫–∞ (–≤ fixtures teardown)

## üîç –õ—É—á—à–∏–µ –ø—Ä–∞–∫—Ç–∏–∫–∏, –∏—Å–ø–æ–ª—å–∑—É–µ–º—ã–µ –≤ –ø—Ä–æ–µ–∫—Ç–µ

1. __Data-Driven Tests__ - —Ä–∞–∑–¥–µ–ª–µ–Ω–∏–µ logic –æ—Ç data
2. __DRY Principle__ - –ø–µ—Ä–µ–∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ —á–µ—Ä–µ–∑ utilities –∏ fixtures
3. __Test Independence__ - –∫–∞–∂–¥—ã–π —Ç–µ—Å—Ç –º–æ–∂–µ—Ç –≤—ã–ø–æ–ª–Ω—è—Ç—å—Å—è –Ω–µ–∑–∞–≤–∏—Å–∏–º–æ
4. __Descriptive Naming__ - –ø–æ–Ω—è—Ç–Ω—ã–µ –Ω–∞–∑–≤–∞–Ω–∏—è —Ç–µ—Å—Ç–æ–≤ –∏ —Ñ–∞–π–ª–æ–≤
5. __Configuration Management__ - –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è —á–µ—Ä–µ–∑ conftest.py
